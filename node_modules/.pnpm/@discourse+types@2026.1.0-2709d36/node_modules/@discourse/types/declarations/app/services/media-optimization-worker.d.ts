/**
 * This worker follows a particular promise/callback flow to ensure
 * that the media-optimization-worker is installed and has its libraries
 * loaded before optimizations can happen. The flow:
 *
 * 1. optimizeImage called
 * 2. worker initialized and started
 * 3. message handlers for worker registered
 * 4. "install" message posted to worker
 * 5. "installed" message received from worker
 * 6. optimizeImage continues, posting "compress" message to worker
 *
 * When the worker is being installed, all other calls to optimizeImage
 * will wait for the "installed" message to be handled before continuing
 * with any image optimization work.
 */
export default class MediaOptimizationWorkerService extends Service {
    appEvents: any;
    siteSettings: any;
    capabilities: any;
    session: any;
    worker: any;
    workerUrl: any;
    currentComposerUploadData: any;
    promiseResolvers: any;
    workerDoneCount: number;
    workerPendingCount: number;
    optimizeImage(data: any, opts?: {}): globalThis.Promise<any>;
    stopWorkerOnError: any;
    ensureAvailableWorker(): globalThis.Promise<any>;
    install(): globalThis.Promise<any>;
    installPromise: import("rsvp").default.Promise<any>;
    afterInstalled: (value?: any) => void;
    failedInstall: (reason?: any) => void;
    startWorker(): void;
    failInstall(message: any, err?: any): void;
    stopWorker(): void;
    workerInstalled: boolean;
    registerMessageHandler(): void;
    cleanupInstallPromises(): void;
    logIfDebug(...messages: any[]): void;
}
import Service from "@ember/service";
//# sourceMappingURL=media-optimization-worker.d.ts.map